:root{
  /* Superficie del contenido (también usada por el pill activo) */
  --surface:#ffffff;

  /* cuánto “sale” la pastilla hacia la derecha en escritorio */
  --pill-out: 22px;
}

/* Tema oscuro mapea superficie */
.alt-theme{ 
  --surface:#111d17; 
  --cream: #FFF4E8;
  background: linear-gradient(180deg, var(--cream), var(--surface));
}

*{ box-sizing:border-box; }
html, body, #root{ height:100%; }

/* Fondo global: degradado verde */
html{
  background: linear-gradient(180deg, var(--dark), var(--dark-2));
}

/* Sin scroll global: el scroll vive en .admin-content */
body{
  margin:0;
  background: transparent;
  font-family:'Poppins',system-ui,sans-serif;
  color:var(--slate);
  overflow: hidden;
}

/* Bloqueo de scroll cuando el drawer está abierto */
.drawer-open body{ overflow: hidden; }

/* ===== Layout contenedor ===== */
.admin-container{
  height: 100dvh;
  background: transparent;
  display: grid;
  grid-template-columns: auto 1fr;
  grid-template-rows: auto 1fr;
  grid-template-areas:
    "sidebar content"
    "sidebar content";
  gap: 10px;
  padding: 10px;
}

/* ===== Sidebar (sin scroll, footer visible) ===== */
.sidebar{
  grid-area: sidebar;
  position: sticky;             /* fija dentro del flujo */
  top: 10px;
  height: calc(100dvh - 20px);  /* ajusta al padd/gap del grid */
  width: var(--sb-open);
   background: linear-gradient(180deg, var(--surface), var(--dark-2));
  color:#EAF7F1;
  display:flex; flex-direction:column;
  overflow: visible;            /* permite que el pill sobresalga */
  border-radius: var(--radius);
  z-index: 2;
}

.sb-header{ position:relative; padding:14px 12px 8px; }
.brand{
  display:grid; place-items:center; height:120px;
}
.brand img{ max-width:16rem; height:auto; }

.menu-btn{
  display:none;
  position:absolute; top:.6rem; right:.6rem;
  width:2.2rem; height:2.2rem; border-radius:50%;
  border:1px solid rgba(255,255,255,.22);
  background:rgba(255,255,255,.12); box-shadow:0 6px 18px rgba(0,0,0,.18);
  color:#fff; font-size:18px;
}

/* ===== Menú ===== */
.menu-container{
  flex:1 0 auto;               /* ocupa el espacio disponible */
  padding: 20px 12px;
  overflow: visible;            /* permite que el pill sobresalga */
}
.menu{
  list-style:none; margin:0; padding:0;
  display:flex; flex-direction:column; gap: var(--item-gap);
}

/* Ítems */
.menu-link{
  position:relative;
  display:flex; align-items:center; gap:.9rem;
  width: 100%;
  margin-right: 0;
  padding:12px 14px 12px 52px;
  border-radius:16px;
  color:#EAF7F1;
  text-decoration:none;
  transition:transform .08s ease, background .25s, color .25s, box-shadow .25s;
  font-size:.98rem; font-weight:600;
  min-height:54px; will-change: transform, width, margin-right;
}
.menu-link:hover{
  background: rgba(255,255,255,.08);
  transform: translateY(-1px);
  box-shadow: 0 8px 24px rgba(0,0,0,.12);
}
.menu-link img{
  position:absolute; left:12px;
  width: var(--item-icon); height: var(--item-icon);
  padding:6px; border-radius:12px;
  background: rgba(255,255,255,.14);
  box-shadow: var(--inner-shadow);
  object-fit:contain;
}

/* Activo sobresaliente */
.menu-link.active{
  background: var(--surface);
  color: var(--dark);
  border-radius: 999px 12px 12px 999px;
  width: calc(101% + var(--pill-out));
  margin-right: calc(var(--pill-out) * -1);
  position: relative;
  z-index: 3;
  transition:
    width .28s ease, margin-right .28s ease,
    background .25s ease, color .25s ease, box-shadow .25s ease;
}
.menu-link.active img{
  background:#F3FAF6;
  box-shadow: inset 0 0 0 1px rgba(21,94,75,.08);
}

/* Accesibilidad */
.menu-link:focus-visible{
  outline: none;
  box-shadow:
    0 10px 30px rgba(148, 38, 38, 0.12),
    0 0 0 2px rgba(255,255,255,.65) inset;
}

/* ===== Footer del sidebar: siempre visible ===== */
.sb-footer{
  margin-top: auto;            /* empuja al fondo */
  border-top:1px solid rgba(255,255,255,.15);
  padding:10px 12px 14px;
  background: transparent;
}
.footer-actions{
  display:flex; gap:10px;
  flex-direction:column;
}
.theme-button{
  flex:1;
  display:flex; align-items:center; justify-content:end; gap:4px;
  width:40px; height:40px;
  margin-right: 10px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.22);
  background: var(--dark-2);
  color:#fff; cursor:pointer;
  font-weight:600;
}
.logout-button{
  flex:1;
  display:flex; align-items:center; justify-content:center; gap:8px;
  height:42px; border-radius:14px;
  border:1px solid rgba(255,255,255,.22);
  background:rgba(255,255,255,.12);
  color:#fff; cursor:pointer;
  font-weight:600;
}
.theme-button i, .logout-button i{ 
  font-size:1.2rem; 
  
}

.theme-button:hover, .logout-button:hover{
  background: white; color: var(--dark-2); border-color: var(--dark-2);
}


/* ===== Área de contenido (con scroll propio) ===== */
.admin-content{
  grid-area: content;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 16px;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

/* Userbar fijo */
.userbar{
  top: 0;
  z-index: 5;
  display:flex; align-items:center; justify-content:end;
  backdrop-filter: blur(6px);
  color:var(--dark-2);
  padding:5px 5px;
  border-radius: 16px;
}
.userbar .user-chip{ display:flex; align-items:center; gap:10px; }
.userbar .user-chip img{
  width:38px; height:38px; border-radius:50%; object-fit:cover;
  background-color: white;
  box-shadow:0 4px 10px rgba(0,0,0,.18);
}
.userbar .meta{ display:flex; flex-direction:column; line-height:1.1; }
.userbar .meta strong{ font-size:.95rem; }
.userbar .meta small{ opacity:1; color: var(--dark-2); }
.userbar .actions .icon-btn{
  width:40px; height:40px; border-radius:14px;
  margin-right: 10px;
  border:1px solid rgba(255,255,255,.25);
  background: var(--dark-2);
  color: white; cursor:pointer;
  gap:4px;
}

.userbar .actions .icon-btn:hover{
  background: white; 
  color: var(--dark-2); 
  border-color: var(--dark-2);
}

/* Tarjeta blanca que contiene el <Outlet /> */
.content-card{
  background: var(--surface);
  color: var(--slate);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 24px clamp(16px,3vw,40px);
  min-height: calc(100dvh - 120px);
  overflow-x: hidden;
  border: 1px solid rgba(0,0,0,.04);
}

/* ===== Tema oscuro ===== */
.alt-theme .content-card{
  background: var(--surface);
  color: #e6f4ef;
  border-color: rgba(255,255,255,.06);
}
.alt-theme .userbar{
  color: white;
}
.alt-theme .meta small{
  opacity:1; color: white;
}
.alt-theme .menu-link.active{
  background: var(--surface);
  color:#e6f4ef;
}
.alt-theme .menu-link.active img{
  background: #e6f4ef;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}

.alt-theme .theme-button, .logout-button{
  background-color: white;
  color: var(--dark-2);
}

.alt-theme .actions .icon-btn{
  background-color: white;
  color: var(--dark-2);
}

.alt-theme .theme-button:hover, .logout-button:hover, .actions .icon-btn:hover{
  background:var(--dark-2); color:white; border-color:#fff;
}


/* ===== Backdrop (drawer móvil) ===== */
.backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.25);
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s ease;
  z-index: 3;
}
.backdrop.show{
  opacity: 1;
  pointer-events: auto;
}

/* ===== Botón hamburguesa ===== */
.mobile-trigger{
  position: fixed;
  left: 16px; top: 16px;
  width:42px; height:42px; border-radius:50%;
  border:1px solid rgba(255,255,255,.35); background:rgba(255,255,255,.16);
  display:none; align-items:center; justify-content:center;
  box-shadow:0 8px 24px rgba(0,0,0,.22);
  z-index: 4; cursor:pointer;
  color:#fff; font-size:22px;
  backdrop-filter: blur(6px);
}

/* ===== Responsive / Drawer behavior ===== */
@media (max-width: 1100px){
  .admin-container{
    grid-template-columns: 1fr;
    grid-template-areas:
      "content"
      "content";
  }

  .sidebar{
    position: fixed;
    top: 0; bottom: 0; left: 0;
    height: 100dvh;
    width: min(90vw, var(--sb-open));
    max-width: var(--sb-open);
    transform: translateX(-100%);
    transition: transform .28s ease;
    border-radius: 0 20px 20px 0;
    overflow: hidden;          /* en móvil no hace falta sobresalir */
  }
  .sidebar.open{ transform: translateX(0); }

  .mobile-trigger{ display:flex; }

  .admin-content{
    grid-area: content;
    padding-top: 74px;
    overflow: auto;
  }

  /* En móvil, el pill no sobresale */
  :root{ --pill-out: 0px; }
  .menu-link.active{
    width: 100%;
    margin-right: 0;
    border-radius: 18px;
    box-shadow: 0 10px 24px rgba(0,0,0,.18);
  }
}

@media (max-width: 720px){
  .userbar{
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
  }
  .userbar .actions{
    display:flex; justify-content:flex-end;
  }
  .content-card{
    min-height: auto;
  }
}
